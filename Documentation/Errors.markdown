Ошибки сервера
================================

Терминология:
-------------------------------

Сервер - сервер Lotus Domino.
Клиент - iPapka
Документ - документ резолюции, документ на подпись, связанный документ.
Аттачмент - совокупность графических файлов, каждый из которых является страницей аттачмента. Фттачмент относится к документу и создается на сервере.
Ресурсы - звуковые или графические файлы.Создается в приложении или на сервере.

Ошибки разделяются на три типа:
1. Общая ошибка сервера (неправильный запрос, системные ошибки и тп) (код ответа сервера 50x, содержание ответа произвольное). К этому же типу относятся сетевые ошибки (отсутствие связи и тп)
2. Отсутсвие ресурса или документа (код ответа сервера 404, содержание ответа произвольное)
3. Конфликты записи данных на сервер. (код ответа сервера 500, содержание ответа соответствует формату ошибки)

Последовательность работы с сервером.
-------------------------------
1. считывание настроек
2. считывание адресной книжки
3. считывание документов
4. считывание ресурсов
5. запись ресурсов
6. запись документов


Запись на сервер.
-------------------------------

Сценарии поведения коиента по типам ошибок при записи данных на сервер:

1. При ошибках первого типа повторять попытку передачи файла или документа при следующей синхронизации, так как такие ошибки, как правило, устранимы (перезагрузка сервера, например)

2. При отсутствии ресурса или документа, ресурс, или документ вместе со всеми его ресурсами должны быть уничтожены на клиенте

3. При конфликтах записи на сервер (к этому относится несоответствие версий закачиваемых файлов, версий документов, документ только на чтение и тп)

Формат ошибки.
-------------------------------
сервер должен отвечать с кодом 500:
{
	"error":
	{
		"code":numeric_error_code,
		"message":"human readable message"
	}
}